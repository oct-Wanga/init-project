import { readdirSync, writeFileSync } from 'fs';
import { join } from 'path';

const ICONS_DIR = join('src', 'assets', 'icons');
const OUTPUT_FILE = join('src', 'assets', 'index.ts');

// icons 폴더 읽기
const files = readdirSync(ICONS_DIR).filter(file => file.endsWith('.svg'));

if (files.length === 0) {
  console.error('❌ No SVG files found in src/assets/icons.');
  process.exit(1);
}

// import 문 생성
const imports = files
  .map(file => {
    const fileName = file.replace('.svg', '');
    const relativePath = `./icons/${file}`; // 상대 경로
    return `import '@/assets/icons/${fileName}.svg';`;
  })
  .join('\n');

// 최종 output 내용
const output = `// Auto-generated by generate-icon-index.mjs
${imports}
`;

writeFileSync(OUTPUT_FILE, output);

console.log(`✅ src/assets/index.ts generated with ${files.length} icons.`);
